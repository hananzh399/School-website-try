const translations = {
  en: {
    // General
    settings: "Settings",
    backToDashboard: "Back to Dashboard",
    close: "Close",
    // Lock Screen
    lockTitle: "Pay-Track",
    lockSubtitle: "Enter your 4-digit PIN to unlock",
    lockSubtitleDefaultPin: "Welcome! The default PIN is <strong>0000</strong>.",
    lockIncorrectPin: "Incorrect PIN. Please try again.",
    lockoutMessage: "Too many attempts. Please try again in",
    // Dashboard
    dashboardTitle: "Project Dashboard",
    dashboardSubtitle: "Manage all your financial tracking projects",
    findProject: "Find a Project",
    searchPlaceholder: "Search by project name...",
    createNewProject: "Create a New Project",
    newProjectPlaceholder: "e.g., 'House Construction'",
    installmentTracker: "Installment Tracker",
    financeTracker: "Finance Tracker",
    createAndOpen: "Create & Open",
    yourProjects: "Your Projects",
    noProjectsYet: "No Projects Yet",
    noProjectsDescription: "Create your first project to start tracking!",
    noProjectsFound: "No Projects Found",
    noProjectsFoundDescription: "Try adjusting your search term.",
    created: "Created",
    // Settings Page
    settingsTitle: "Settings",
    settingsSubtitle: "Manage global application data",
    appearance: "Appearance",
    dashboardTheme: "Dashboard Theme",
    themeDefault: "Default",
    themeGreen: "Green",
    themeDark: "Dark",
    themeLight: "Light",
    themeCreator: "Theme Creator",
    yourThemes: "Your Themes",
    noSavedThemes: "You haven't saved any custom themes yet.",
    security: "Security",
    pinTitle: "Login & Deletion PIN",
    pinDescription: "Set the PIN required to open the app and to delete projects. The default PIN for first-time users is '0000'.",
    currentPin: "Current PIN",
    newPin: "New PIN (4 digits)",
    confirmNewPin: "Confirm New PIN",
    updatePin: "Update PIN",
    currency: "Currency",
    currencyTitle: "Application Currency",
    currencyDescription: "Choose the currency for all your projects. This will affect how amounts are displayed.",
    selectCurrency: "Select Currency",
    language: "Language",
    languageTitle: "Application Language",
    languageDescription: "Select your preferred language for the application interface.",
    selectLanguage: "Select Language",
    notifications: "Notification Settings",
    reminderTitle: "Monthly Installment Reminder",
    reminderDescription: "Get an in-app reminder to add your monthly payment.",
    reminderDay: "Reminder Day of Month",
    reminderDayDescription: "On this day each month, you'll see a reminder on the dashboard if you have pending installments.",
    // PayTrack Page
    installmentHeader: "Installment Payment Tracker",
    expenseHeader: "Income & Expense Tracker",
    installmentSubHeader: "Track your payments with ease and precision",
    expenseSubHeader: "Track your income and expenses with ease",
    totalAmount: "Total Amount",
    paidAmount: "Paid Amount",
    pendingAmount: "Pending Amount",
    currentBalance: "Current Balance",
    totalIncome: "Total Income",
    totalExpenses: "Total Expenses",
    paymentProgress: "Payment Progress",
    balanceProgress: "Balance Progress (% of Income Remaining)",
    addPayment: "Add Payment",
    projectNameLabel: "Project/Item Name",
    paymentDateLabel: "Payment Date",
    totalAmountLabel: "Total Amount",
    pendingAmountLabel: "Pending Amount",
    transactionAmountLabel: "Transaction Amount",
    paymentMethodLabel: "Payment Method",
    selectPaymentMethod: "Select Payment Method",
    cash: "Cash",
    bankTransaction: "Bank Transaction",
    selectBank: "Select Bank",
    chooseBank: "Choose Bank",
    addCustomBank: "+ Add Custom Bank",
    viewHistory: "View History",
    exportData: "Export Data",
    deleteAll: "Delete All",
    updateTransaction: "Update Transaction",
    cancel: "Cancel",
    addIncome: "Add Income",
    addExpense: "Add Expense",
    history: "History",
    chart: "Chart",
    viewCard: "View Card",
    share: "Share",
    export: "Export",
    quickStats: "Quick Stats",
    totalTransactions: "Total Transactions",
    historyPrompt: 'Click "View History" to see detailed records',
    congratulations: "Congratulations!",
    paymentCompleteMessage: "You have successfully completed all payments!",
    recordAdded: "Record added successfully",
    recordUpdated: "Record updated successfully",
    confirmDeleteTransaction: "Are you sure you want to delete this transaction?",
    // Card Page
    cardholderName: "CARDHOLDER NAME",
    validThru: "VALID THRU",
    // Currencies
    rupees: "Rupees",
    dollars: "Dollars",
    euros: "Euros",
    pounds: "Pounds",
    yen: "Yen",
    // PayTrack Modals
    addTransaction: "Add Transaction",
    editTransaction: "Edit Transaction",
    amount: "Amount",
    date: "Date",
    descriptionOptional: "Description (Optional)",
    category: "Category",
    saveTransaction: "Save Transaction",
    // History Page
    transactionHistory: "Transaction History",
    historySubtitle: "Detailed view of all your records",
    searchRecords: "Search Records",
    searchRecordsPlaceholder: "Search by category, amount, or bank...",
    filterByMethod: "Filter by Method",
    allMethods: "All Methods",
    filterByDate: "Filter by Date",
    allDates: "All Dates",
    today: "Today",
    thisWeek: "This Week",
    thisMonth: "This Month",
    transactionRecords: "Transaction Records",
    showing: "Showing",
    of: "of",
    records: "records",
    noRecordsFound: "No Records Found",
    noRecordsDescription: "Start by adding your first transaction on the main page",
    addRecord: "Add Record",
    noFilterResults: "No Results Found",
    noFilterDescription: "Try adjusting your search or filter criteria",
    avgTransaction: "Avg Transaction",
    largestTransaction: "Largest Transaction",
    smallestTransaction: "Smallest Transaction",
    lastTransaction: "Last Transaction",
  },
  es: {
    // General
    settings: "Configuración",
    backToDashboard: "Volver al Panel",
    close: "Cerrar",
    // Lock Screen
    lockTitle: "Pay-Track",
    lockSubtitle: "Ingrese su PIN de 4 dígitos para desbloquear",
    lockSubtitleDefaultPin: "¡Bienvenido! El PIN predeterminado es <strong>0000</strong>.",
    lockIncorrectPin: "PIN incorrecto. Por favor, inténtelo de nuevo.",
    lockoutMessage: "Demasiados intentos. Por favor, inténtelo de nuevo en",
    // Dashboard
    dashboardTitle: "Panel de Proyectos",
    dashboardSubtitle: "Gestiona todos tus proyectos de seguimiento financiero",
    findProject: "Buscar un Proyecto",
    searchPlaceholder: "Buscar por nombre de proyecto...",
    createNewProject: "Crear un Nuevo Proyecto",
    newProjectPlaceholder: "Ej: 'Construcción de Casa'",
    installmentTracker: "Seguimiento de Cuotas",
    financeTracker: "Seguimiento Financiero",
    createAndOpen: "Crear y Abrir",
    yourProjects: "Tus Proyectos",
    noProjectsYet: "Aún no hay proyectos",
    noProjectsDescription: "¡Crea tu primer proyecto para empezar a seguir!",
    noProjectsFound: "No se encontraron proyectos",
    noProjectsFoundDescription: "Intenta ajustar tu término de búsqueda.",
    created: "Creado",
    // Settings Page
    settingsTitle: "Configuración",
    settingsSubtitle: "Gestionar datos globales de la aplicación",
    appearance: "Apariencia",
    dashboardTheme: "Tema del Panel",
    themeDefault: "Predeterminado",
    themeGreen: "Verde",
    themeDark: "Oscuro",
    themeLight: "Claro",
    themeCreator: "Creador de Temas",
    yourThemes: "Tus Temas",
    noSavedThemes: "Aún no has guardado ningún tema personalizado.",
    security: "Seguridad",
    pinTitle: "PIN de Inicio de Sesión y Eliminación",
    pinDescription: "Establece el PIN necesario para abrir la aplicación y eliminar proyectos. El PIN predeterminado para nuevos usuarios es '0000'.",
    currentPin: "PIN Actual",
    newPin: "Nuevo PIN (4 dígitos)",
    confirmNewPin: "Confirmar Nuevo PIN",
    updatePin: "Actualizar PIN",
    currency: "Moneda",
    currencyTitle: "Moneda de la Aplicación",
    currencyDescription: "Elige la moneda para todos tus proyectos. Esto afectará cómo se muestran los montos.",
    selectCurrency: "Seleccionar Moneda",
    language: "Idioma",
    languageTitle: "Idioma de la Aplicación",
    languageDescription: "Selecciona tu idioma preferido para la interfaz de la aplicación.",
    selectLanguage: "Seleccionar Idioma",
    notifications: "Ajustes de Notificaciones",
    reminderTitle: "Recordatorio Mensual de Cuotas",
    reminderDescription: "Recibe un recordatorio en la app para añadir tu pago mensual.",
    reminderDay: "Día del Mes para Recordatorio",
    reminderDayDescription: "En este día de cada mes, verás un recordatorio en el panel si tienes cuotas pendientes.",
    // PayTrack Page
    installmentHeader: "Seguimiento de Pagos a Plazos",
    expenseHeader: "Seguimiento de Ingresos y Gastos",
    installmentSubHeader: "Sigue tus pagos con facilidad y precisión",
    expenseSubHeader: "Sigue tus ingresos y gastos con facilidad",
    totalAmount: "Monto Total",
    paidAmount: "Monto Pagado",
    pendingAmount: "Monto Pendiente",
    currentBalance: "Saldo Actual",
    totalIncome: "Ingresos Totales",
    totalExpenses: "Gastos Totales",
    paymentProgress: "Progreso de Pago",
    balanceProgress: "Progreso del Saldo (% de Ingresos Restante)",
    addPayment: "Añadir Pago",
    projectNameLabel: "Nombre del Proyecto/Artículo",
    paymentDateLabel: "Fecha de Pago",
    totalAmountLabel: "Monto Total",
    pendingAmountLabel: "Monto Pendiente",
    transactionAmountLabel: "Monto de la Transacción",
    paymentMethodLabel: "Método de Pago",
    selectPaymentMethod: "Seleccionar Método de Pago",
    cash: "Efectivo",
    bankTransaction: "Transacción Bancaria",
    selectBank: "Seleccionar Banco",
    chooseBank: "Elegir Banco",
    addCustomBank: "+ Añadir Banco Personalizado",
    viewHistory: "Ver Historial",
    exportData: "Exportar Datos",
    deleteAll: "Eliminar Todo",
    updateTransaction: "Actualizar Transacción",
    cancel: "Cancelar",
    addIncome: "Añadir Ingreso",
    addExpense: "Añadir Gasto",
    history: "Historial",
    chart: "Gráfico",
    viewCard: "Ver Tarjeta",
    share: "Compartir",
    export: "Exportar",
    quickStats: "Estadísticas Rápidas",
    totalTransactions: "Transacciones Totales",
    historyPrompt: 'Haz clic en "Ver Historial" para ver registros detallados',
    congratulations: "¡Felicidades!",
    paymentCompleteMessage: "¡Has completado todos los pagos con éxito!",
    recordAdded: "Registro añadido con éxito",
    recordUpdated: "Registro actualizado con éxito",
    confirmDeleteTransaction: "¿Estás seguro de que quieres eliminar esta transacción?",
    // Card Page
    cardholderName: "TITULAR DE LA TARJETA",
    validThru: "VÁLIDO HASTA",
    // Currencies
    rupees: "Rupias",
    dollars: "Dólares",
    euros: "Euros",
    pounds: "Libras",
    yen: "Yenes",
    // PayTrack Modals
    addTransaction: "Añadir Transacción",
    editTransaction: "Editar Transacción",
    amount: "Monto",
    date: "Fecha",
    descriptionOptional: "Descripción (Opcional)",
    category: "Categoría",
    saveTransaction: "Guardar Transacción",
    // History Page
    transactionHistory: "Historial de Transacciones",
    historySubtitle: "Vista detallada de todos tus registros",
    searchRecords: "Buscar Registros",
    searchRecordsPlaceholder: "Buscar por categoría, monto o banco...",
    filterByMethod: "Filtrar por Método",
    allMethods: "Todos los Métodos",
    filterByDate: "Filtrar por Fecha",
    allDates: "Todas las Fechas",
    today: "Hoy",
    thisWeek: "Esta Semana",
    thisMonth: "Este Mes",
    transactionRecords: "Registros de Transacciones",
    showing: "Mostrando",
    of: "de",
    records: "registros",
    noRecordsFound: "No se encontraron registros",
    noRecordsDescription: "Comienza añadiendo tu primera transacción en la página principal",
    addRecord: "Añadir Registro",
    noFilterResults: "No se encontraron resultados",
    noFilterDescription: "Intenta ajustar tus criterios de búsqueda o filtro",
    avgTransaction: "Transacción Promedio",
    largestTransaction: "Transacción Mayor",
    smallestTransaction: "Transacción Menor",
    lastTransaction: "Última Transacción",
  },
  ur: {
    // General
    settings: "ترتیبات",
    backToDashboard: "ڈیش بورڈ پر واپس",
    close: "بند کریں",
    // Lock Screen
    lockTitle: "پے-ٹریک",
    lockSubtitle: "غیر مقفل کرنے کے لیے اپنا 4 ہندسوں کا پن درج کریں۔",
    lockSubtitleDefaultPin: "خوش آمدید! پہلے سے طے شدہ پن <strong>0000</strong> ہے۔",
    lockIncorrectPin: "غلط پن۔ براہ مہربانی دوبارہ کوشش کریں.",
    lockoutMessage: "بہت زیادہ کوششیں۔ براہ کرم دوبارہ کوشش کریں",
    // Dashboard
    dashboardTitle: "پروجیکٹ ڈیش بورڈ",
    dashboardSubtitle: "اپنے تمام مالیاتی ٹریکنگ پروجیکٹس کا نظم کریں۔",
    findProject: "پروجیکٹ تلاش کریں۔",
    searchPlaceholder: "پروجیکٹ کے نام سے تلاش کریں...",
    createNewProject: "نیا پروجیکٹ بنائیں",
    newProjectPlaceholder: "مثال کے طور پر، 'گھر کی تعمیر'",
    installmentTracker: "قسط ٹریکر",
    financeTracker: "فنانس ٹریکر",
    createAndOpen: "بنائیں اور کھولیں۔",
    yourProjects: "آپ کے پروجیکٹس",
    noProjectsYet: "ابھی تک کوئی پروجیکٹ نہیں ہے۔",
    noProjectsDescription: "ٹریکنگ شروع کرنے کے لیے اپنا پہلا پروجیکٹ بنائیں!",
    noProjectsFound: "کوئی پروجیکٹ نہیں ملا",
    noProjectsFoundDescription: "اپنی تلاش کی اصطلاح کو ایڈجسٹ کرنے کی کوشش کریں۔",
    created: "تخلیق کیا گیا۔",
    // Settings Page
    settingsTitle: "ترتیبات",
    settingsSubtitle: "عالمی ایپلیکیشن ڈیٹا کا نظم کریں۔",
    appearance: "ظاہری شکل",
    dashboardTheme: "ڈیش بورڈ تھیم",
    themeDefault: "پہلے سے طے شدہ",
    themeGreen: "سبز",
    themeDark: "تاریک",
    themeLight: "ہلکا",
    themeCreator: "تھیم بنانے والا",
    yourThemes: "آپ کے تھیمز",
    noSavedThemes: "آپ نے ابھی تک کوئی کسٹم تھیم محفوظ نہیں کیا ہے۔",
    security: "سیکورٹی",
    pinTitle: "لاگ ان اور ڈیلیٹ پن",
    pinDescription: "ایپ کو کھولنے اور پروجیکٹس کو حذف کرنے کے لیے درکار پن سیٹ کریں۔ پہلی بار استعمال کرنے والوں کے لیے ڈیفالٹ پن '0000' ہے۔",
    currentPin: "موجودہ پن",
    newPin: "نیا پن (4 ہندسوں کا)",
    confirmNewPin: "نئے پن کی تصدیق کریں۔",
    updatePin: "پن اپ ڈیٹ کریں۔",
    currency: "کرنسی",
    currencyTitle: "ایپلیکیشن کرنسی",
    currencyDescription: "اپنے تمام پروجیکٹس کے لیے کرنسی کا انتخاب کریں۔ اس سے رقوم ظاہر ہونے کے طریقے پر اثر پڑے گا۔",
    selectCurrency: "کرنسی منتخب کریں۔",
    language: "زبان",
    languageTitle: "ایپلیکیشن کی زبان",
    languageDescription: "ایپلیکیشن انٹرفیس کے لیے اپنی ترجیحی زبان منتخب کریں۔",
    selectLanguage: "زبان منتخب کریں۔",
    notifications: "اطلاعات کی ترتیبات",
    reminderTitle: "ماہانہ قسط کی یاد دہانی",
    reminderDescription: "اپنی ماہانہ ادائیگی شامل کرنے کے لیے ایک درون ایپ یاد دہانی حاصل کریں۔",
    reminderDay: "یاد دہانی کے مہینے کا دن",
    reminderDayDescription: "ہر مہینے کے اس دن، اگر آپ کی قسطیں زیر التواء ہیں تو آپ کو ڈیش بورڈ پر ایک یاد دہانی نظر آئے گی۔",
    // PayTrack Page
    installmentHeader: "قسط کی ادائیگی کا ٹریکر",
    expenseHeader: "آمدنی اور اخراجات کا ٹریکر",
    installmentSubHeader: "آسانی اور درستگی کے ساتھ اپنی ادائیگیوں کو ٹریک کریں۔",
    expenseSubHeader: "آسانی کے ساتھ اپنی آمدنی اور اخراجات کو ٹریک کریں۔",
    totalAmount: "کل رقم",
    paidAmount: "ادا شدہ رقم",
    pendingAmount: "واجب الادا رقم",
    currentBalance: "موجودہ بیلنس",
    totalIncome: "کل آمدنی",
    totalExpenses: "کل اخراجات",
    paymentProgress: "ادائیگی کی پیشرفت",
    balanceProgress: "بیلنس کی پیشرفت (% بقیہ آمدنی کا)",
    addPayment: "ادائیگی شامل کریں۔",
    projectNameLabel: "پروجیکٹ/آئٹم کا نام",
    paymentDateLabel: "ادائیگی کی تاریخ",
    totalAmountLabel: "کل رقم",
    pendingAmountLabel: "واجب الادا رقم",
    transactionAmountLabel: "لین دین کی رقم",
    paymentMethodLabel: "ادائیگی کا طریقہ",
    selectPaymentMethod: "ادائیگی کا طریقہ منتخب کریں۔",
    cash: "نقد",
    bankTransaction: "بینک ٹرانزیکشن",
    selectBank: "بینک منتخب کریں۔",
    chooseBank: "بینک کا انتخاب کریں۔",
    addCustomBank: "+ کسٹم بینک شامل کریں۔",
    viewHistory: "تاریخ دیکھیں",
    exportData: "ڈیٹا برآمد کریں۔",
    deleteAll: "سب کو حذف کریں۔",
    updateTransaction: "لین دین کو اپ ڈیٹ کریں۔",
    cancel: "منسوخ کریں۔",
    addIncome: "آمدنی شامل کریں۔",
    addExpense: "خرچ شامل کریں۔",
    history: "تاریخ",
    chart: "چارٹ",
    viewCard: "کارڈ دیکھیں",
    share: "شیئر کریں۔",
    export: "برآمد کریں۔",
    quickStats: "فوری اعدادوشمار",
    totalTransactions: "کل لین دین",
    historyPrompt: 'تفصیلی ریکارڈ دیکھنے کے لیے "تاریخ دیکھیں" پر کلک کریں۔',
    congratulations: "مبارک ہو!",
    paymentCompleteMessage: "آپ نے تمام ادائیگیاں کامیابی سے مکمل کر لی ہیں!",
    recordAdded: "ریکارڈ کامیابی سے شامل کر دیا گیا۔",
    recordUpdated: "ریکارڈ کامیابی سے اپ ڈیٹ ہو گیا۔",
    confirmDeleteTransaction: "کیا آپ واقعی اس لین دین کو حذف کرنا چاہتے ہیں؟",
    // Card Page
    cardholderName: "کارڈ ہولڈر کا نام",
    validThru: "میعاد",
    // Currencies
    rupees: "روپے",
    dollars: "ڈالر",
    euros: "یورو",
    pounds: "پاؤنڈ",
    yen: "ین",
    // PayTrack Modals
    addTransaction: "لین دین شامل کریں۔",
    editTransaction: "لین دین میں ترمیم کریں۔",
    amount: "رقم",
    date: "تاریخ",
    descriptionOptional: "تفصیل (اختیاری)",
    category: "زمرہ",
    saveTransaction: "لین دین محفوظ کریں۔",
    // History Page
    transactionHistory: "لین دین کی تاریخ",
    historySubtitle: "آپ کے تمام ریکارڈز کا تفصیلی نظارہ",
    searchRecords: "ریکارڈ تلاش کریں۔",
    searchRecordsPlaceholder: "زمرہ، رقم، یا بینک کے لحاظ سے تلاش کریں...",
    filterByMethod: "طریقہ کے لحاظ سے فلٹر کریں۔",
    allMethods: "تمام طریقے",
    filterByDate: "تاریخ کے لحاظ سے فلٹر کریں۔",
    allDates: "تمام تاریخیں۔",
    today: "آج",
    thisWeek: "اس ہفتے",
    thisMonth: "اس مہینے",
    transactionRecords: "لین دین کے ریکارڈز",
    showing: "دکھا رہا ہے۔",
    of: "کے",
    records: "ریکارڈز",
    noRecordsFound: "کوئی ریکارڈ نہیں ملا",
    noRecordsDescription: "مرکزی صفحہ پر اپنی پہلی لین دین شامل کرکے شروع کریں۔",
    addRecord: "ریکارڈ شامل کریں۔",
    noFilterResults: "کوئی نتیجہ نہیں ملا",
    noFilterDescription: "اپنی تلاش یا فلٹر کے معیار کو ایڈجسٹ کرنے کی کوشش کریں۔",
    avgTransaction: "اوسط لین دین",
    largestTransaction: "سب سے بڑی لین دین",
    smallestTransaction: "سب سے چھوٹی لین دین",
    lastTransaction: "آخری لین دین",
  }
};

const getLanguage = () => {
    const settings = JSON.parse(localStorage.getItem('dashboardGlobalSettings')) || {};
    return settings.language || 'en';
};

const translatePage = () => {
    const lang = getLanguage();
    document.documentElement.lang = lang;
    document.documentElement.dir = lang === 'ur' ? 'rtl' : 'ltr';

    document.querySelectorAll('[data-translate-key]').forEach(element => {
        const key = element.getAttribute('data-translate-key');
        const translation = translations[lang]?.[key] || translations['en'][key];
        
        if (translation) {
            if (element.hasAttribute('data-placeholder-key')) {
                element.placeholder = translation;
            } else if (element.hasAttribute('data-title-key')) {
                element.title = translation;
            } else {
                element.innerHTML = translation;
            }
        }
    });
};

const setLanguage = (lang) => {
    let settings = JSON.parse(localStorage.getItem('dashboardGlobalSettings')) || {};
    settings.language = lang;
    localStorage.setItem('dashboardGlobalSettings', JSON.stringify(settings));
    translatePage();
};

const getTranslatedString = (key) => {
    const lang = getLanguage();
    return translations[lang]?.[key] || translations['en'][key] || key;
};