<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>PayTrack - Settings</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
  <link href="dashboard.css" rel="stylesheet"/>
  <style>
    .theme-option, .saved-theme-button {
      transition: all 0.3s ease;
      cursor: pointer;
    }
    .theme-option.selected, .saved-theme-button.selected {
      transform: scale(1.05);
      box-shadow: 0 0 0 2px white, 0 0 0 4px #3b82f6;
    }
    .custom-color-container {
      transition: all 0.3s ease;
      border: 1px solid #d1d5db;
    }
    body.theme-dark .custom-color-container {
      border-color: #4b5563;
    }
    .color-preview {
      width: 2rem;
      height: 2rem;
      border-radius: 0.5rem;
      border: 2px solid #e5e7eb;
      background-color: #f3f4f6;
    }
    .gradient-options, .reminder-options {
      max-height: 0;
      overflow: hidden;
      transition: all 0.5s ease-in-out;
      opacity: 0;
    }
    .gradient-options.show, .reminder-options.show {
      max-height: 200px;
      opacity: 1;
    }
    .saved-theme-button {
        position: relative;
        overflow: hidden;
    }
    .delete-theme-btn {
        position: absolute;
        top: 4px;
        right: 4px;
        width: 1.5rem;
        height: 1.5rem;
        background-color: rgba(0,0,0,0.5);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transform: scale(0.5);
        transition: all 0.2s ease;
    }
    .saved-theme-button:hover .delete-theme-btn {
        opacity: 1;
        transform: scale(1);
    }
  </style>
</head>
<body class="min-h-screen">

  <div class="container mx-auto px-4 py-8 max-w-4xl">
    <!-- Header -->
    <div class="header-container mb-8">
      <div class="flex-grow">
        <h1 class="text-4xl font-bold mb-2 flex items-center header-main-text">
          <img id="settingsLogo" src="picasa.png" alt="Pay-Track Logo" class="mr-3 header-icon" height="52" width="52"/>
          <span data-translate-key="settingsTitle">Settings</span>
        </h1>
        <p class="header-sub-text" data-translate-key="settingsSubtitle">
          Manage global application data
        </p>
      </div>
      <div class="header-actions">
        <button aria-label="Back to Dashboard" class="nav-button settings-button" onclick="window.location.href='dashboard.html'" data-title-key="backToDashboard">
          <i class="fas fa-arrow-left"></i>
        </button>
      </div>
    </div>

    <!-- Main Settings Container -->
    <div class="glass-effect rounded-2xl p-6 space-y-8">
      
      <!-- Appearance Settings -->
      <div>
        <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
          <i class="fas fa-palette mr-3 text-blue-500"></i>
          <span data-translate-key="appearance">Appearance</span>
        </h2>
        <div class="p-4 border rounded-lg">
          <h3 class="font-semibold text-lg text-gray-800 mb-4" data-translate-key="dashboardTheme">Dashboard Theme</h3>
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4" id="themeSelector">
            <button class="theme-option bg-gradient-to-r from-purple-500 to-indigo-600 h-16 rounded-lg flex items-center justify-center text-white font-medium" data-theme="default" data-translate-key="themeDefault">
              Default
            </button>
            <button class="theme-option bg-gradient-to-r from-green-500 to-emerald-600 h-16 rounded-lg flex items-center justify-center text-white font-medium" data-theme="green" data-translate-key="themeGreen">
              Green
            </button>
            <button class="theme-option bg-gradient-to-r from-gray-800 to-gray-900 h-16 rounded-lg flex items-center justify-center text-white font-medium" data-theme="dark" data-translate-key="themeDark">
              Dark
            </button>
            <button class="theme-option bg-gray-200 border border-gray-300 h-16 rounded-lg flex items-center justify-center text-gray-800 font-medium" data-theme="light" data-translate-key="themeLight">
              Light
            </button>
          </div>
          <!-- Your Saved Themes -->
           <div class="mt-6 pt-6 border-t" id="savedThemesSection">
              <h4 class="font-semibold text-md text-gray-800 mb-3" data-translate-key="yourThemes">Your Themes</h4>
              <div id="savedThemesContainer" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                  <!-- Saved themes will be injected here -->
              </div>
              <p id="noSavedThemes" class="text-sm text-gray-500 hidden" data-translate-key="noSavedThemes">You haven't saved any custom themes yet.</p>
           </div>
          <!-- Custom Theme Creator -->
          <div class="mt-6 pt-6 border-t">
              <h4 class="font-semibold text-md text-gray-800 mb-3" data-translate-key="themeCreator">Theme Creator</h4>
              <div id="customColorContainer" class="p-4 rounded-lg custom-color-container space-y-4">
                  <!-- Color Input 1 -->
                  <div class="flex flex-col sm:flex-row gap-4 items-center">
                      <div class="color-preview" id="colorPreview1"></div>
                      <div class="relative flex-grow w-full">
                         <i class="fas fa-hashtag absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                         <input id="customColorInput1" class="w-full pl-8 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="Color 1 (e.g., 1a2b3c)" type="text" maxlength="6"/>
                      </div>
                  </div>
                  <!-- Gradient Toggle -->
                  <div class="flex items-center">
                    <label for="gradientToggle" class="relative inline-flex items-center cursor-pointer mr-3">
                      <input type="checkbox" id="gradientToggle" class="sr-only peer">
                      <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                    </label>
                    <span class="text-sm font-medium text-gray-700">Use Gradient</span>
                  </div>
                  <!-- Gradient Options -->
                  <div id="gradientOptions" class="gradient-options space-y-4">
                      <!-- Color Input 2 -->
                      <div class="flex flex-col sm:flex-row gap-4 items-center">
                          <div class="color-preview" id="colorPreview2"></div>
                          <div class="relative flex-grow w-full">
                             <i class="fas fa-hashtag absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                             <input id="customColorInput2" class="w-full pl-8 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="Color 2 (e.g., 9f8e7d)" type="text" maxlength="6"/>
                          </div>
                      </div>
                      <!-- Direction Selector -->
                      <div>
                        <label for="gradientDirection" class="block text-sm font-medium text-gray-700 mb-1">Direction</label>
                        <select id="gradientDirection" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 bg-white">
                          <option value="to right">Left to Right</option>
                          <option value="to left">Right to Left</option>
                          <option value="to bottom">Top to Bottom</option>
                          <option value="to top">Bottom to Top</option>
                          <option value="to bottom right">Top-Left to Bottom-Right</option>
                          <option value="to bottom left">Top-Right to Bottom-Left</option>
                        </select>
                      </div>
                  </div>
                  <!-- Action Buttons -->
                  <div class="flex flex-col sm:flex-row gap-4 pt-4 border-t">
                    <button id="applyCustomColorBtn" class="flex-1 btn-secondary text-white font-semibold py-2 px-6 rounded-lg">Preview</button>
                    <button id="saveThemeBtn" class="flex-1 btn-primary text-white font-semibold py-2 px-6 rounded-lg hidden">Save Current Theme</button>
                  </div>
              </div>
          </div>
        </div>
      </div>
      
      <!-- Security Settings -->
      <div>
        <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center pt-8 border-t">
          <i class="fas fa-lock mr-3 text-red-500"></i>
          <span data-translate-key="security">Security</span>
        </h2>
        <div class="p-4 border rounded-lg space-y-6">
          <div>
            <h3 class="font-semibold text-lg text-gray-800 mb-2" data-translate-key="pinTitle">Login & Deletion PIN</h3>
            <p class="text-sm text-gray-600 mb-4" data-translate-key="pinDescription">Set the PIN required to open the app and to delete projects. The default PIN for first-time users is '0000'.</p>
            <form id="passwordForm" class="space-y-4">
              <div>
                <label for="currentPassword" class="block text-sm font-medium text-gray-700 mb-1" data-translate-key="currentPin">Current PIN</label>
                <input type="password" id="currentPassword" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500" placeholder="Enter current PIN" required>
              </div>
              <div>
                <label for="newPassword" class="block text-sm font-medium text-gray-700 mb-1" data-translate-key="newPin">New PIN (4 digits)</label>
                <input type="password" id="newPassword" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500" placeholder="Enter new 4-digit PIN" required maxlength="4">
              </div>
              <div>
                <label for="confirmPassword" class="block text-sm font-medium text-gray-700 mb-1" data-translate-key="confirmNewPin">Confirm New PIN</label>
                <input type="password" id="confirmPassword" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500" placeholder="Confirm new PIN" required maxlength="4">
              </div>
              <div class="pt-2">
                <button type="submit" id="updatePasswordBtn" class="btn-danger text-white font-semibold py-2 px-6 rounded-lg" data-translate-key="updatePin">Update PIN</button>
              </div>
            </form>
          </div>
        </div>
      </div>
      
      <!-- Currency Settings -->
      <div>
        <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center pt-8 border-t">
          <i class="fas fa-dollar-sign mr-3 text-green-500"></i>
          <span data-translate-key="currency">Currency</span>
        </h2>
        <div class="p-4 border rounded-lg">
          <div>
            <h3 class="font-semibold text-lg text-gray-800" data-translate-key="currencyTitle">Application Currency</h3>
            <p class="text-sm text-gray-600 mb-4" data-translate-key="currencyDescription">Choose the currency for all your projects. This will affect how amounts are displayed.</p>
            <label for="currencySelector" class="block text-sm font-medium text-gray-700 mb-2" data-translate-key="selectCurrency">Select Currency</label>
            <select id="currencySelector" class="w-full sm:w-1/2 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white">
              <option value="USD" data-symbol="$">USD - United States Dollar ($)</option>
              <option value="PKR" data-symbol="Rs">PKR - Pakistani Rupee (Rs)</option>
              <option value="INR" data-symbol="₹">INR - Indian Rupee (₹)</option>
              <option value="EUR" data-symbol="€">EUR - Euro (€)</option>
              <option value="GBP" data-symbol="£">GBP - British Pound (£)</option>
              <option value="JPY" data-symbol="¥">JPY - Japanese Yen (¥)</option>
            </select>
          </div>
        </div>
      </div>
      
      <!-- Language Settings -->
      <div>
        <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center pt-8 border-t">
          <i class="fas fa-language mr-3 text-indigo-500"></i>
          <span data-translate-key="language">Language</span>
        </h2>
        <div class="p-4 border rounded-lg">
          <div>
            <h3 class="font-semibold text-lg text-gray-800" data-translate-key="languageTitle">Application Language</h3>
            <p class="text-sm text-gray-600 mb-4" data-translate-key="languageDescription">Select your preferred language for the application interface.</p>
            <label for="languageSelector" class="block text-sm font-medium text-gray-700 mb-2" data-translate-key="selectLanguage">Select Language</label>
            <select id="languageSelector" class="w-full sm:w-1/2 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white">
              <option value="en">English (US)</option>
              <option value="es">Español (Spanish)</option>
              <option value="ur">اردو (Urdu)</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Notification Settings -->
      <div>
        <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center pt-8 border-t">
          <i class="fas fa-bell mr-3 text-yellow-500"></i>
          <span data-translate-key="notifications">Notification Settings</span>
        </h2>
        <div class="space-y-6">
          <!-- Monthly Reminder Setting -->
          <div class="p-4 border rounded-lg">
            <div class="flex items-center justify-between">
              <div>
                <h3 class="font-semibold text-lg text-gray-800" data-translate-key="reminderTitle">Monthly Installment Reminder</h3>
                <p class="text-sm text-gray-600" data-translate-key="reminderDescription">Get an in-app reminder to add your monthly payment.</p>
              </div>
              <label for="reminderToggle" class="relative inline-flex items-center cursor-pointer">
                <input type="checkbox" id="reminderToggle" class="sr-only peer">
                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"></div>
              </label>
            </div>
            <!-- Reminder Day Selector (hidden by default) -->
            <div id="reminderDaySelector" class="mt-4 reminder-options">
              <label for="reminderDay" class="block text-sm font-medium text-gray-700 mb-2" data-translate-key="reminderDay">Reminder Day of Month</label>
              <select id="reminderDay" class="w-full sm:w-1/2 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white">
                <!-- Options will be populated by JS -->
              </select>
              <p class="text-xs text-gray-500 mt-2" data-translate-key="reminderDayDescription">On this day each month, you'll see a reminder on the dashboard if you have pending installments.</p>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
  
  <div aria-atomic="true" aria-live="assertive" class="notification" id="notification" role="alert"></div>

  <script src="translations.js"></script>
  <script src="settings.js"></script>
</body>
</html>